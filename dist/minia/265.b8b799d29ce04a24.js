"use strict";(self.webpackChunkminia=self.webpackChunkminia||[]).push([[265],{6265:(I,u,o)=>{o.r(u),o.d(u,{SeedsDistModule:()=>F});var b=o(177),m=o(8498),t=o(9417),n=o(3682),c=o(3887),e=o(4438),h=o(2768),v=o(8548);let p=(()=>{class a{constructor(i,r){this.formBuilder=i,this.vlcService=r,this.counties=[],this.sub_counties=[],this.wards=[],this.valueChains=[],this.distributor=[{name:"AH"},{name:"ICRISAT"}],this.recipient=[{name:"ToT"}],this.selectedVcs=[],this.seedVarieties=[],this.userId=sessionStorage.getItem("userId")}ngOnInit(){this.breadCrumbItems=[{label:"Seeds Distribution"},{label:"ToTs",active:!0}],this.valueChainForm=this.formBuilder.group({valueChainId:["",t.k0.required],seedVariety:["",t.k0.required],seedWeight:["",t.k0.required],batchNo:["",t.k0.required],pricePerUnit:["",t.k0.required]}),this.registerForm=this.formBuilder.group({memberId:["",t.k0.required],userId:["",t.k0.required],image:["",t.k0.required],recipientType:["",t.k0.required],distributor:["",t.k0.required],wardId:["",t.k0.required]}),this.getSeedVarieties(),this.getValueChains()}onsubmit(){let i={idNumber:"",userId:this.userId,image:this.registerForm.get("image")?.value,recipientType:this.registerForm.get("recipientType")?.value,distributor:this.registerForm.get("distributor")?.value,wardId:this.registerForm.get("wardId")?.value,vc:this.selectedVcs};this.vlcService.createSeedDistribution(i).subscribe(r=>{})}getSeedVarieties(){this.vlcService.getAllSeedVarieties().subscribe(i=>{200==i.statusCode&&(this.seedVarieties=i.message)})}getValueChains(){this.vlcService.getValueChains().subscribe(i=>{200==i.statusCode&&(this.valueChains=i.message)})}addVLC(){let i={batchNo:parseInt(this.valueChainForm.get("batchNo")?.value),pricePerUnit:parseInt(this.valueChainForm.get("pricePerUnit")?.value),seedVariety:this.valueChainForm.get("seedVariety")?.value,seedWeight:parseInt(this.valueChainForm.get("seedWeight")?.value),valueChainId:this.valueChainForm.get("valueChainId")?.value};this.selectedVcs.push(i),this.valueChainForm.reset()}static#e=this.\u0275fac=function(r){return new(r||a)(e.rXU(t.ok),e.rXU(h.d))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-tot"]],standalone:!0,features:[e.aNF],decls:72,vars:14,consts:[["title","ToTs Seeds Distribution",3,"breadcrumbItems"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["bindLabel","name","bindValue","name","placeholder","Select Distributor","formControlName","distributor",3,"items","virtualScroll"],["bindLabel","name","bindValue","name","placeholder","Select Distributor","formControlName","recipientType",3,"items","virtualScroll"],["bindLabel","title","bindValue","ward_id","placeholder","Select Ward","formControlName","wardId",3,"items","virtualScroll"],[1,"form-group","position-relative"],["type","date","formControlName","",1,"form-control"],["type","text","formControlName","memberId",1,"form-control"],["type","file","placeholder","Id no.","formControlName","image",1,"form-control"],[1,"col-12","rounded","py-1","my-2"],["bindLabel","value_chain_name","bindValue","value_chain_id","placeholder","Select VLC","formControlName","valueChainId",3,"items","virtualScroll"],["bindLabel","seed_variety","bindValue","seed_variety_id","placeholder","Select VLC","formControlName","valueChainId",3,"items","virtualScroll"],["type","text","formControlName","seedWeight",1,"form-control"],["type","text","formControlName","batchNo",1,"form-control"],["type","text","formControlName","pricePerUnit",1,"form-control"],["type","submit",1,"btn","btn-primary","my-2",3,"disabled"],[1,"col-sm-12","mt-2"],["type","submit",1,"btn","btn-primary"]],template:function(r,s){1&r&&(e.nrm(0,"app-pagetitle",0),e.j41(1,"div")(2,"div",1)(3,"div",2)(4,"form",3),e.bIt("ngSubmit",function(){return s.onsubmit()}),e.j41(5,"div",4)(6,"div",5)(7,"label"),e.EFF(8,"Distributor"),e.k0s(),e.j41(9,"div",6),e.nrm(10,"ng-select",7),e.k0s()(),e.j41(11,"div",5)(12,"label"),e.EFF(13,"Recipient"),e.k0s(),e.j41(14,"div",6),e.nrm(15,"ng-select",8),e.k0s()(),e.j41(16,"div",5)(17,"label"),e.EFF(18,"Ward"),e.k0s(),e.j41(19,"div",6),e.nrm(20,"ng-select",9),e.k0s()(),e.j41(21,"div",5)(22,"label"),e.EFF(23,"Date"),e.k0s(),e.j41(24,"fieldset",10),e.nrm(25,"input",11),e.k0s()(),e.j41(26,"div",5)(27,"label"),e.EFF(28,"Recipient ID No"),e.k0s(),e.j41(29,"fieldset",10),e.nrm(30,"input",12),e.k0s()(),e.j41(31,"div",5)(32,"label"),e.EFF(33,"Image"),e.k0s(),e.j41(34,"fieldset",10),e.nrm(35,"input",13),e.k0s()(),e.j41(36,"div",14)(37,"form",3),e.bIt("ngSubmit",function(){return s.addVLC()}),e.j41(38,"label"),e.EFF(39,"Add Value Chain"),e.k0s(),e.j41(40,"div",4)(41,"div",5)(42,"label"),e.EFF(43,"Value Chain"),e.k0s(),e.j41(44,"div",6),e.nrm(45,"ng-select",15),e.k0s()(),e.j41(46,"div",5)(47,"label"),e.EFF(48,"Value Chain"),e.k0s(),e.j41(49,"div",6),e.nrm(50,"ng-select",16),e.k0s()(),e.j41(51,"div",5)(52,"label"),e.EFF(53,"Seed Weight"),e.k0s(),e.j41(54,"fieldset",10),e.nrm(55,"input",17),e.k0s()(),e.j41(56,"div",5)(57,"label"),e.EFF(58,"Batch No"),e.k0s(),e.j41(59,"fieldset",10),e.nrm(60,"input",18),e.k0s()(),e.j41(61,"div",5)(62,"label"),e.EFF(63,"Price Per Unit"),e.k0s(),e.j41(64,"fieldset",10),e.nrm(65,"input",19),e.k0s()()(),e.j41(66,"div")(67,"button",20),e.EFF(68,"Add VLC"),e.k0s()()()(),e.j41(69,"div",21)(70,"button",22),e.EFF(71,"Save"),e.k0s()()()()()()()),2&r&&(e.Y8G("breadcrumbItems",s.breadCrumbItems),e.R7$(4),e.Y8G("formGroup",s.registerForm),e.R7$(6),e.Y8G("items",s.distributor)("virtualScroll",!0),e.R7$(5),e.Y8G("items",s.recipient)("virtualScroll",!0),e.R7$(5),e.Y8G("items",s.wards)("virtualScroll",!0),e.R7$(17),e.Y8G("formGroup",s.valueChainForm),e.R7$(8),e.Y8G("items",s.valueChains)("virtualScroll",!0),e.R7$(5),e.Y8G("items",s.seedVarieties)("virtualScroll",!0),e.R7$(17),e.Y8G("disabled",s.valueChainForm.invalid))},dependencies:[n.MQ,n.vr,c.G,v.T,t.X1,t.qT,t.me,t.BC,t.cb,t.j4,t.JD]})}return a})();var g=o(3165);const C=[{path:"tot",component:p},{path:"farmer",component:(()=>{class a{constructor(i,r){this.formBuilder=i,this.vlcService=r,this.counties=[],this.sub_counties=[],this.wards=[],this.valueChains=[],this.seedVarieties=[],this.selectedVcs=[],this.userId=sessionStorage.getItem("userId")}ngOnInit(){this.counties=g.v,this.breadCrumbItems=[{label:"Seeds Distribution"},{label:"Farmer",active:!0}],this.valueChainForm=this.formBuilder.group({valueChainId:["",t.k0.required],seedVariety:["",t.k0.required],seedWeight:["",t.k0.required],batchNo:["",t.k0.required],pricePerUnit:["",t.k0.required]}),this.registerForm=this.formBuilder.group({idNumber:["",t.k0.required],userId:["",t.k0.required],image:["",t.k0.required],recipientType:["",t.k0.required],distributor:["",t.k0.required],wardId:["",t.k0.required],countyId:["",t.k0.required],subCountyId:["",t.k0.required]}),this.getValueChains(),this.getSeedVarieties()}onsubmit(){let i={idNumber:this.registerForm.get("idNumber")?.value,userId:this.userId,image:this.registerForm.get("image")?.value,recipientType:"Farmer",distributor:"TOT",wardId:this.registerForm.get("wardId")?.value,vc:this.selectedVcs};this.vlcService.seedDistributionReg(i).subscribe(r=>{})}addVLC(){let i={batchNo:this.valueChainForm.get("batchNo")?.value,pricePerUnit:parseInt(this.valueChainForm.get("pricePerUnit")?.value),seedVariety:this.valueChainForm.get("seedVariety")?.value,seedWeight:parseInt(this.valueChainForm.get("seedWeight")?.value),valueChainId:this.valueChainForm.get("valueChainId")?.value};this.selectedVcs.push(i),this.valueChainForm.reset()}getValueChains(){this.vlcService.getValueChains().subscribe(i=>{200==i.statusCode&&(this.valueChains=i.message)})}getSeedVarieties(){this.vlcService.getAllSeedVarieties().subscribe(i=>{200==i.statusCode&&(this.seedVarieties=i.message)})}getWards(i){let r=this.registerForm.get("subCountyId")?.value;this.sub_counties.filter(l=>r.includes(l.subCountyId)).forEach(l=>{this.wards=this.wards.concat(l.wards)})}subCounties(i){let r=this.registerForm.get("countyId")?.value;this.counties.filter(l=>r.includes(l.county_id)).forEach(l=>{this.sub_counties=this.sub_counties.concat(l.sub_counties)})}filterWards(i){let r=this.registerForm.get("subCountyId")?.value;this.sub_counties.filter(l=>r.includes(l.subCountyId)).forEach(l=>{this.wards=this.wards.concat(l.wards)})}static#e=this.\u0275fac=function(r){return new(r||a)(e.rXU(t.ok),e.rXU(h.d))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-farmer"]],standalone:!0,features:[e.aNF],decls:72,vars:15,consts:[["title","Farmers Seeds Distribution",3,"breadcrumbItems"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["bindLabel","name","bindValue","county_id","placeholder","Select County","formControlName","countyId",3,"items","multiple","virtualScroll","change"],["bindLabel","name","bindValue","subCountyId","placeholder","Select Sub County","formControlName","subCountyId",3,"items","multiple","virtualScroll","change"],["bindLabel","name","bindValue","wardId","placeholder","Select Ward","formControlName","wardId",3,"items","virtualScroll"],[1,"form-group","position-relative"],["type","date","placeholder","First Name",1,"form-control"],["type","text","formControlName","idNumber",1,"form-control"],["type","file","formControlName","image",1,"form-control"],[1,"col-xl-12","rounded","py-1","my-2"],["bindLabel","value_chain_name","bindValue","value_chain_id","placeholder","Select VLC","formControlName","valueChainId",3,"items","virtualScroll"],["bindLabel","seed_variety","bindValue","seed_variety_id","placeholder","Select VLC","formControlName","valueChainId",3,"items","virtualScroll"],["type","text","formControlName","seedWeight",1,"form-control"],["type","text","formControlName","batchNo",1,"form-control"],["type","text","formControlName","pricePerUnit",1,"form-control"],["type","submit",1,"btn","btn-primary","mt-2"],[1,"col-sm-12","mt-2"]],template:function(r,s){1&r&&(e.nrm(0,"app-pagetitle",0),e.j41(1,"div")(2,"div",1)(3,"div",2)(4,"form",3),e.bIt("ngSubmit",function(){return s.onsubmit()}),e.j41(5,"div",4)(6,"div",5)(7,"label"),e.EFF(8,"County"),e.k0s(),e.j41(9,"div",6)(10,"ng-select",7),e.bIt("change",function(d){return s.subCounties(d)}),e.k0s()()(),e.j41(11,"div",5)(12,"label"),e.EFF(13,"Sub County"),e.k0s(),e.j41(14,"div",6)(15,"ng-select",8),e.bIt("change",function(d){return s.getWards(d)}),e.k0s()()(),e.j41(16,"div",5)(17,"label"),e.EFF(18,"Ward"),e.k0s(),e.j41(19,"div",6),e.nrm(20,"ng-select",9),e.k0s()(),e.j41(21,"div",5)(22,"label"),e.EFF(23,"Date"),e.k0s(),e.j41(24,"fieldset",10),e.nrm(25,"input",11),e.k0s()(),e.j41(26,"div",5)(27,"label"),e.EFF(28,"Recipient ID No"),e.k0s(),e.j41(29,"fieldset",10),e.nrm(30,"input",12),e.k0s()(),e.j41(31,"div",5)(32,"label"),e.EFF(33,"Image"),e.k0s(),e.j41(34,"fieldset",10),e.nrm(35,"input",13),e.k0s()(),e.j41(36,"div",14)(37,"form",3),e.bIt("ngSubmit",function(){return s.addVLC()}),e.j41(38,"label"),e.EFF(39,"Add Value Chain"),e.k0s(),e.j41(40,"div",4)(41,"div",5)(42,"label"),e.EFF(43,"Value Chain"),e.k0s(),e.j41(44,"div",6),e.nrm(45,"ng-select",15),e.k0s()(),e.j41(46,"div",5)(47,"label"),e.EFF(48,"Seed Variety"),e.k0s(),e.j41(49,"div",6),e.nrm(50,"ng-select",16),e.k0s()(),e.j41(51,"div",5)(52,"label"),e.EFF(53,"Seed Weight"),e.k0s(),e.j41(54,"fieldset",10),e.nrm(55,"input",17),e.k0s()(),e.j41(56,"div",5)(57,"label"),e.EFF(58,"Batch No"),e.k0s(),e.j41(59,"fieldset",10),e.nrm(60,"input",18),e.k0s()(),e.j41(61,"div",5)(62,"label"),e.EFF(63,"Price Per Unit"),e.k0s(),e.j41(64,"fieldset",10),e.nrm(65,"input",19),e.k0s()()(),e.j41(66,"div")(67,"button",20),e.EFF(68,"Add VLC"),e.k0s()()()(),e.j41(69,"div",21)(70,"button",20),e.EFF(71,"Save"),e.k0s()()()()()()()),2&r&&(e.Y8G("breadcrumbItems",s.breadCrumbItems),e.R7$(4),e.Y8G("formGroup",s.registerForm),e.R7$(6),e.Y8G("items",s.counties)("multiple",!0)("virtualScroll",!0),e.R7$(5),e.Y8G("items",s.sub_counties)("multiple",!0)("virtualScroll",!0),e.R7$(5),e.Y8G("items",s.wards)("virtualScroll",!0),e.R7$(17),e.Y8G("formGroup",s.valueChainForm),e.R7$(8),e.Y8G("items",s.valueChains)("virtualScroll",!0),e.R7$(5),e.Y8G("items",s.seedVarieties)("virtualScroll",!0))},dependencies:[c.G,v.T,t.X1,t.qT,t.me,t.BC,t.cb,t.j4,t.JD,n.MQ,n.vr]})}return a})()}];let f=(()=>{class a{static#e=this.\u0275fac=function(r){return new(r||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({imports:[m.iI.forChild(C),m.iI]})}return a})(),F=(()=>{class a{static#e=this.\u0275fac=function(r){return new(r||a)};static#t=this.\u0275mod=e.$C({type:a});static#i=this.\u0275inj=e.G2t({imports:[b.MD,f]})}return a})()}}]);